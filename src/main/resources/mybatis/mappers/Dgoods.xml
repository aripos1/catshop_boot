<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="Dgoods">

	<select id="selectGoods" resultType="com.javaex.vo.GoodsVo">
		
		<![CDATA[
		SELECT * FROM (
 
    SELECT 
        no,
        category,
        name,
        content,
        price,
        DATE(reg_date) AS regDate,
        save_namef AS saveNamef,
        file_pathf AS filepathf,
        save_nameb AS saveNameb,
        user_no AS userNo
    FROM (
        SELECT * FROM goods 
        WHERE category = 'ADULT'
        ORDER BY reg_date DESC
        LIMIT 2
    ) AS adult_goods

    UNION ALL 

    
    SELECT 
        no,
        category,
        name,
        content,
        price,
        DATE(reg_date) AS regDate,
        save_namef AS saveNamef,
        file_pathf AS filepathf,
        save_nameb AS saveNameb,
        user_no AS userNo
    FROM (
        SELECT * FROM goods 
        WHERE category = 'KITTEN'
        ORDER BY reg_date DESC
        LIMIT 1
    ) AS baby_goods

    UNION ALL 

 
    SELECT 
        no,
        category,
        name,
        content,
        price,
        DATE(reg_date) AS regDate,
        save_namef AS saveNamef,
        file_pathf AS filepathf,
        save_nameb AS saveNameb,
        user_no AS userNo
    FROM (
        SELECT * FROM goods 
        WHERE category = 'CAN'
        ORDER BY reg_date DESC
        LIMIT 2
    ) AS can_goods

    UNION ALL 

    
    SELECT 
        no,
        category,
        name,
        content,
        price,
        DATE(reg_date) AS regDate,
        save_namef AS saveNamef,
        file_pathf AS filepathf,
        save_nameb AS saveNameb,
        user_no As userNo
    FROM (
        SELECT * FROM goods 
        WHERE category = 'CHURR'
        ORDER BY reg_date DESC
        LIMIT 1
    ) AS chur_goods

) AS combined_results

ORDER BY regDate DESC;



    	]]>
		 
	</select>
	
	</mapper>